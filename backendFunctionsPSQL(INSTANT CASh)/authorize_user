
CREATE OR REPLACE FUNCTION icashobj.authorize_user(
	usridcs text DEFAULT ''::text,
	usrsts text DEFAULT ''::text,
	usrps1 text DEFAULT ''::text,
	usrps2 text DEFAULT ''::text,
	usrps3 text DEFAULT ''::text,
	usrps4 text DEFAULT ''::text,
	usrnam text DEFAULT ''::text,
	usrsfc numeric DEFAULT 0,
	usrfrc numeric DEFAULT 0,
	usrsbc numeric DEFAULT 0,
	usrccd numeric DEFAULT 0,
	usracr text DEFAULT ''::text,
	usrstt text DEFAULT ''::text,
	usrcac text DEFAULT ''::text,
	usrica text DEFAULT ''::text,
	usrcia text DEFAULT ''::text,
	usrlib text DEFAULT ''::text,
	usrttu text DEFAULT ''::text,
	usrusr text DEFAULT ''::text,
	usrdev text DEFAULT ''::text,
	usrlud date DEFAULT NULL::date,
	usrrfl text DEFAULT ''::text,
	usrrfl1 text DEFAULT ''::text,
	usrrfl2 text DEFAULT ''::text,
	usrrsn text DEFAULT ''::text,
	usrpch numeric DEFAULT 0,
	usrstd numeric DEFAULT 0,
	usreml text DEFAULT ''::text,
	usrqus text DEFAULT ''::text,
	usrans text DEFAULT ''::text,
	usrifl text DEFAULT ''::text,
	usrefl1 text DEFAULT ''::text,
	usrefl2 text DEFAULT ''::text,
	usrgrp text DEFAULT ''::text,
	usrlng text DEFAULT ''::text,
	usrmno text DEFAULT ''::text,
	usrotp text DEFAULT ''::text,
	usratl text DEFAULT ''::text,
	usract1 text DEFAULT ''::text,
	usrflr1 text DEFAULT ''::text,
	usrflr2 text DEFAULT ''::text,
	usrflr3 text DEFAULT ''::text,
	usrflr4 numeric DEFAULT 0,
	usrflr5 numeric DEFAULT 0,
	usrflr6 text DEFAULT ''::text,
	usrflr7 text DEFAULT ''::text,
	usrflr8 text DEFAULT ''::text,
	usrflr9 text DEFAULT ''::text,
	password1 text DEFAULT ''::text,
	password2 text DEFAULT ''::text)
    RETURNS text
    LANGUAGE 'plpgsql'

  
AS $BODY$
    BEGIN
	INSERT INTO icashobj.ictusr(usridc ,usrsts ,usrps1 ,usrps2 ,usrps3 ,usrps4 ,usrnam ,usrsfc ,usrfrc ,usrsbc ,usrccd ,usracr ,usrstt ,usrcac ,usrica ,usrcia ,usrlib ,usrttu ,usrusr,usrdev ,usrlud ,usrrfl ,usrrfl1,
usrrfl2,
usrrsn ,
usrpch ,
usrstd ,
usreml,
usrqus,
usrans ,
usrifl ,
usrefl1,
usrefl2,
usrgrp ,
usrlng ,
usrmno ,
usrotp ,
usratl ,usract ,usrflr1,usrflr2,usrflr3,usrflr4,usrflr5,usrflr6,usrflr7,usrflr8,usrflr9) 
	VALUES (usridcs ,
usrsts ,
usrps1 ,
usrps2 ,
usrps3 ,
usrps4 ,
usrnam ,
usrsfc ,
usrfrc ,
usrsbc ,
usrccd ,
usracr ,
usrstt ,
usrcac ,
usrica ,
usrcia ,
usrlib ,
usrttu ,
usrusr,
usrdev ,
usrlud ,
usrrfl ,
usrrfl1,
usrrfl2,
usrrsn ,
usrpch ,
usrstd ,
usreml,
usrqus,
usrans ,
usrifl ,
usrefl1,
usrefl2,
usrgrp ,
usrlng ,
usrmno ,
usrotp ,
'Y' ,
usract1,
usrflr1,
usrflr2,
usrflr3,
usrflr4,
usrflr5,
usrflr6,
usrflr7,
usrflr8,
usrflr9);
insert into icashobj.pasenct(encidc,encpdc,encpw1,encpw2)values(usridcs,'IC',password1,password2);
update icashobj.ictusrl set logtyp=usract1, usrdte=current_date ,usrtme=current_time,usratl='Y' where usridc=usridcs ;
	RETURN 'success';
	END
 $BODY$;
